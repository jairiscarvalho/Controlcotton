"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Html5Qrcode={})}(this,(function(e){"use strict";
class Html5QrcodeScanType{static get SCAN_TYPE_CAMERA(){return"SCAN_TYPE_CAMERA"}static get SCAN_TYPE_FILE(){return"SCAN_TYPE_FILE"}}
class Html5QrcodeSupportedFormats{static get QR_CODE(){return"qr_code"}static get AZTEC(){return"aztec"}static get CODE_128(){return"code_128"}static get CODE_39(){return"code_39"}static get CODE_93(){return"code_93"}static get CODABAR(){return"codabar"}static get DATA_MATRIX(){return"data_matrix"}static get MAXICODE(){return"maxicode"}static get ITF(){return"itf"}static get EAN_13(){return"ean_13"}static get EAN_8(){return"ean_8"}static get PDF_417(){return"pdf_417"}static get RSS_14(){return"rss_14"}static get RSS_EXPANDED(){return"rss_expanded"}static get UPC_A(){return"upc_a"}static get UPC_E(){return"upc_e"}}
class Logger{constructor(e=!1){this.enabled=e}log(...e){this.enabled&&console.log(...e)}warn(...e){this.enabled&&console.warn(...e)}error(...e){this.enabled&&console.error(...e)}}
class Html5QrcodeResultFactory{static createFromText(e){return{text:e}}}
class Html5QrcodeCameraScanConfig{constructor(e={}){this.fps=e.fps||10,this.qrbox=e.qrbox||250,this.aspectRatio=e.aspectRatio||null,this.disableFlip=!!e.disableFlip,this.videoConstraints=e.videoConstraints||null}}
class Html5Qrcode{constructor(e,t=!1){if(!e)throw"empty element passed";this.elementId=e,this.verbose=t,this.logger=new Logger(this.verbose),this.qrcodeSuccessCallback=null,this.qrcodeErrorCallback=null,this.localMediaStream=null,this.scannerPaused=!1,this.shouldScan=!0,this.config=null,this.qrRegion=null,this.context=null,this.canvasElement=null,this.canvas=null,this.videoElement=null,this.lastScanImageFile=null}isScanning(){return!!this.localMediaStream}start(e,t,r,n){return new Promise(((o,i)=>{this.qrcodeSuccessCallback=r,this.qrcodeErrorCallback=n,this.config=t;let a=new Html5QrcodeCameraScanConfig(t),l=document.getElementById(this.elementId);if(!l)return void i(`Element with id=${this.elementId} not found`);this.videoElement=document.createElement("video"),this.canvasElement=document.createElement("canvas"),this.canvasElement.style.display="none",this.canvas=this.canvasElement.getContext("2d"),l.appendChild(this.videoElement),l.appendChild(this.canvasElement);let s="object"==typeof e?e:{facingMode:e};navigator.mediaDevices.getUserMedia({video:s}).then((e=>{this.localMediaStream=e,this.videoElement.srcObject=e,this.videoElement.setAttribute("playsinline",!0),this.videoElement.play();let t=()=>{this.scannerPaused||(this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight,this.canvas.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),this.canvasElement.toBlob((e=>{if(!e)return;let t=new File([e],"frame.jpg",{type:"image/jpeg"});this.qrcodeSuccessCallback&&this.qrcodeSuccessCallback(t)}),"image/jpeg")),setTimeout(t,1e3/a.fps)};t()})).catch((e=>{i(e)}))}))}
stop(){return new Promise(((e,t)=>{this.localMediaStream&&this.localMediaStream.getTracks().forEach((e=>{e.stop()})),this.localMediaStream=null,this.qrcodeSuccessCallback=null,this.qrcodeErrorCallback=null;let r=document.getElementById(this.elementId);if(r){r.innerHTML="";e()}else t(`Element with id=${this.elementId} not found`)}}))}}
e.Html5Qrcode=Html5Qrcode,e.Html5QrcodeCameraScanConfig=Html5QrcodeCameraScanConfig,e.Html5QrcodeResultFactory=Html5QrcodeResultFactory,e.Html5QrcodeScanType=Html5QrcodeScanType,e.Html5QrcodeSupportedFormats=Html5QrcodeSupportedFormats,Object.defineProperty(e,\"__esModule\",{value:!0})}));
